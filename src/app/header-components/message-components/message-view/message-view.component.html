<mat-expansion-panel (opened)="reloadMessages()">
  <mat-expansion-panel-header>
    <mat-panel-title>
      Mailbox
    </mat-panel-title>
    <mat-panel-description>
      {{this.messages!.length}} messages
    </mat-panel-description>
  </mat-expansion-panel-header>

  <ng-template [ngForOf]="messages" let-i="index" let-item ngFor>
    <mat-card
      matBadge="{{this.isMessageRead(item)}}" matBadgeColor="warn"
      matBadgePosition="after">
      <mat-card-title>{{item.title}}</mat-card-title>
      <mat-card-subtitle>Author: {{item.author}}</mat-card-subtitle>
      <div>
        {{item.content}}
      </div>
      <mat-card-actions>
        <button (click)="this.readMessage(item)" mat-button>
          <mat-icon>remove_red_eye</mat-icon>
          Read
        </button>
        <button (click)="this.deleteMessage(item._id)" mat-button>
          <mat-icon>delete</mat-icon>
          Delete
        </button>
      </mat-card-actions>
    </mat-card>
  </ng-template>

</mat-expansion-panel>


